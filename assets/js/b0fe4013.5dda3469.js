"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4654],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}},53165:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"type":"mdx","permalink":"/labs/sage-mcp","source":"@site/src/pages/labs/sage-mcp.md","description":"# Sage MCP: AI-Powered Edge Computing Interface","frontMatter":{},"unlisted":false}');var r=i(74848),t=i(28453);const a=i.p+"assets/medias/sage-mcp-video-de2c9cf7407a6b37b378feffa90b8953.mp4";var o=i(67512),l=i(54625);const c={},d="Sage MCP: AI-Powered Edge Computing Interface",h={},u=[{value:"What We&#39;re Building",id:"what-were-building",level:2},{value:"The Tech Stack &amp; Architecture",id:"the-tech-stack--architecture",level:2},{value:"Layer 1: FastMCP Framework",id:"layer-1-fastmcp-framework",level:3},{value:"Layer 2: Service Architecture",id:"layer-2-service-architecture",level:3},{value:"Layer 3: Intelligent Caching",id:"layer-3-intelligent-caching",level:3},{value:"Layer 4: Hybrid Image Search",id:"layer-4-hybrid-image-search",level:3},{value:"Layer 5: Authentication &amp; Security",id:"layer-5-authentication--security",level:3},{value:"Key Capabilities in Action",id:"key-capabilities-in-action",level:2},{value:"Natural Language Data Queries",id:"natural-language-data-queries",level:3},{value:"Intelligent Plugin Discovery",id:"intelligent-plugin-discovery",level:3},{value:"Visual Node Discovery",id:"visual-node-discovery",level:3},{value:"Automated Job Submission",id:"automated-job-submission",level:3},{value:"The Developer Experience",id:"the-developer-experience",level:2},{value:"Technical Innovations",id:"technical-innovations",level:2},{value:"1. Tool Chaining &amp; Context Awareness",id:"1-tool-chaining--context-awareness",level:3},{value:"2. Pre-Signed URL System",id:"2-pre-signed-url-system",level:3},{value:"3. Smart Query Enhancement",id:"3-smart-query-enhancement",level:3},{value:"4. Adaptive Caching Strategy",id:"4-adaptive-caching-strategy",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Open Source &amp; Community",id:"open-source--community",level:2}];function g(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sage-mcp-ai-powered-edge-computing-interface",children:"Sage MCP: AI-Powered Edge Computing Interface"})}),(0,r.jsx)(o.A,{variant:"contained",component:l.N_,to:"/docs/tutorials/sage-mcp#getting-started",className:"!normal-case text-nowrap",children:(0,r.jsx)("span",{children:"Try It Now"})})]}),"\n",(0,r.jsxs)(n.p,{children:["In the rapidly evolving landscape of AI and edge computing, accessing complex cyberinfrastructure shouldn't require memorizing APIs or writing custom scripts. What if you could simply ",(0,r.jsx)(n.em,{children:"ask"})," for what you need in plain English? That's the vision behind ",(0,r.jsx)(n.strong,{children:"Sage MCP"}),", a ",(0,r.jsx)(n.strong,{children:"Model Context Protocol"})," server that bridges the gap between Large Language Models and the Sage edge computing ecosystem, making advanced sensor networks accessible through natural conversation."]}),"\n",(0,r.jsx)("video",{className:"w-full h-auto",controls:!0,children:(0,r.jsx)("source",{src:a,type:"video/mp4"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sage MCP"})," transforms how researchers, developers, and data scientists interact with 100+ edge nodes worldwide, enabling natural language queries, intelligent plugin discovery, and automated job submission, all through your favorite AI-powered IDE."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Let's explore what it does, how it works, and where it's headed next."}),"\n",(0,r.jsx)(n.h2,{id:"what-were-building",children:"What We're Building"}),"\n",(0,r.jsxs)(n.p,{children:["This project demonstrates the power of ",(0,r.jsx)(n.strong,{children:"protocol-driven AI integration"}),", using the Model Context Protocol (MCP) to connect LLMs directly to scientific cyberinfrastructure. At its core, the system:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Exposes Sage capabilities"})," as MCP tools that LLMs can invoke intelligently"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Queries real-time sensor data"})," from edge nodes across the globe"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Searches images semantically"})," using hybrid vector + keyword search with reranking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discovers and recommends plugins"})," from the Edge Code Repository"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Submits and monitors jobs"})," with natural language commands"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caches results"})," using Redis for performance optimization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generates pre-signed URLs"})," for secure, browser-accessible image access"]}),"\n",(0,r.jsxs)(n.li,{children:["Provides ",(0,r.jsx)(n.strong,{children:"comprehensive documentation"})," through conversational Q&A"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Why MCP? Because it creates a ",(0,r.jsx)(n.strong,{children:"standardized interface"})," between AI models and tools, enabling seamless integration across different LLM providers and AI-powered IDEs like Cursor, while maintaining security and flexibility."]}),"\n",(0,r.jsx)(n.h2,{id:"the-tech-stack--architecture",children:"The Tech Stack & Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Here's how the system is architected:"}),"\n",(0,r.jsx)(n.h3,{id:"layer-1-fastmcp-framework",children:"Layer 1: FastMCP Framework"}),"\n",(0,r.jsxs)(n.p,{children:["We built on ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://github.com/jlowin/fastmcp",children:"FastMCP"})}),", a Python framework for creating MCP servers with elegant decorators and type safety. FastMCP handles the protocol complexity, letting us focus on exposing Sage capabilities as intuitive tools."]}),"\n",(0,r.jsx)(n.p,{children:"Key features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic tool registration"})," with type hints and docstrings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTP transport"})," for public access (",(0,r.jsx)(n.a,{href:"https://mcp.sagecontinuum.org/mcp",children:"https://mcp.sagecontinuum.org/mcp"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom endpoints"})," for image proxying and health checks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication middleware"})," supporting Basic, Bearer, and token-based auth"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"layer-2-service-architecture",children:"Layer 2: Service Architecture"}),"\n",(0,r.jsx)(n.p,{children:"The server is organized into modular services:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sage_mcp_server/\n\u251c\u2500\u2500 data_service.py          # Sage data client wrapper\n\u251c\u2500\u2500 job_service.py           # Job submission & management\n\u251c\u2500\u2500 plugin_registry.py       # ECR plugin metadata & search\n\u251c\u2500\u2500 image_search_service.py  # Hybrid image search with embeddings\n\u251c\u2500\u2500 cache_service.py         # Redis caching layer\n\u2514\u2500\u2500 docs_helper.py           # Documentation search & FAQ\n"})}),"\n",(0,r.jsx)(n.p,{children:"Each service is independently testable and maintainable, with clear separation of concerns."}),"\n",(0,r.jsx)(n.h3,{id:"layer-3-intelligent-caching",children:"Layer 3: Intelligent Caching"}),"\n",(0,r.jsxs)(n.p,{children:["We use ",(0,r.jsx)(n.strong,{children:"Redis"})," as a caching layer to optimize performance:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin metadata"})," cached for quick discovery (TTL: 1 hour)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node information"})," cached to reduce API calls (TTL: 1 hour)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query results"})," cached with intelligent invalidation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Image search embeddings"})," cached for instant retrieval"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Cache hit ratios typically exceed 70%, dramatically reducing response times and API load."}),"\n",(0,r.jsx)(n.h3,{id:"layer-4-hybrid-image-search",children:"Layer 4: Hybrid Image Search"}),"\n",(0,r.jsxs)(n.p,{children:["The image search capability integrates our ",(0,r.jsx)(n.a,{href:"./image-search",children:"hybrid vector + keyword search system"})," directly into the MCP interface. This allows LLMs to semantically search through thousands of Sage images using natural language queries. The MCP layer adds:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node-based filtering"})," to find images from specific locations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visual feature discovery"})," to identify nodes by what their cameras can see"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pre-signed URL generation"})," for secure, authentication-free image access"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For details on the underlying search architecture (Florence 2, ImageBind, Weaviate, and reranking), see the ",(0,r.jsx)(n.a,{href:"./image-search",children:"Image Search Labs page"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"layer-5-authentication--security",children:"Layer 5: Authentication & Security"}),"\n",(0,r.jsx)(n.p,{children:"Security is built-in at multiple levels:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Token-based authentication"})," embedded in MCP requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HMAC-signed pre-signed URLs"})," for time-limited image access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Environment variable credentials"})," for production deployments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query parameter fallbacks"})," for legacy compatibility"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-capabilities-in-action",children:"Key Capabilities in Action"}),"\n",(0,r.jsx)(n.h3,{id:"natural-language-data-queries",children:"Natural Language Data Queries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'User: "What\'s the highest temperature in Chicago right now?"\n\nMCP: [Automatically finds Chicago nodes, queries temperature data,\n     computes statistics, and returns formatted results]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"intelligent-plugin-discovery",children:"Intelligent Plugin Discovery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'User: "I need to detect flowering plants with computer vision"\n\nMCP: [Searches ECR registry, matches against keywords and descriptions,\n     recommends relevant plugins with parameters and usage examples]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"visual-node-discovery",children:"Visual Node Discovery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'User: "Find nodes near rivers or bodies of water"\n\nMCP: [Searches image database semantically, groups by node,\n     returns nodes where cameras capture water features]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"automated-job-submission",children:"Automated Job Submission"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'User: "Deploy cloud cover detection to nodes W019 and W020"\n\nMCP: [Generates complete job configuration, submits to scheduler,\n     returns job ID and monitoring instructions]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"the-developer-experience",children:"The Developer Experience"}),"\n",(0,r.jsxs)(n.p,{children:["For IDE integration (e.g., Cursor), users simply add to their ",(0,r.jsx)(n.code,{children:"~/.cursor/mcp.json"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "sage": {\n      "url": "https://mcp.sagecontinuum.org/mcp",\n      "headers": {\n        "Authorization": "Bearer {username}:{token}"\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Then they can ask questions naturally:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:'"Show me temperature readings from prairie nodes in the last hour"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:'"Find plugins for bird sound detection"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:'"Get me images of cumulus clouds from node W06B"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:'"Submit an air quality monitoring job to Chicago nodes"'})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The LLM automatically selects and invokes the appropriate tools, formats responses, and maintains conversation context."}),"\n",(0,r.jsx)(n.h2,{id:"technical-innovations",children:"Technical Innovations"}),"\n",(0,r.jsx)(n.h3,{id:"1-tool-chaining--context-awareness",children:"1. Tool Chaining & Context Awareness"}),"\n",(0,r.jsx)(n.p,{children:"The MCP protocol enables LLMs to chain multiple tool calls intelligently:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Query: "Deploy cloud monitoring to all nodes in Illinois"\n\nTool chain:\n1. get_nodes_by_location("Illinois") \u2192 [W019, W020, W023, ...]\n2. find_plugins_for_task("cloud monitoring") \u2192 Plugin recommendations\n3. submit_plugin_job("cloud_cover", "IL-Cloud-Monitor", "W019,W020,...")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-pre-signed-url-system",children:"2. Pre-Signed URL System"}),"\n",(0,r.jsx)(n.p,{children:"Traditional image access required authentication headers, making browser viewing impossible. Our solution:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def generate_proxy_token(sage_url, auth_token, expires_in=300):\n    # Create cryptographically signed token with embedded auth\n    payload = {"url": sage_url, "auth": auth_token, "exp": expires_at}\n    signature = hmac.new(secret, payload, sha256).digest()\n    return f"{b64encode(payload)}.{b64encode(signature)}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Result: Browser-accessible URLs that work for 5 minutes without any authentication headers."}),"\n",(0,r.jsx)(n.h3,{id:"3-smart-query-enhancement",children:"3. Smart Query Enhancement"}),"\n",(0,r.jsx)(n.p,{children:"The system intelligently enhances queries:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# User asks for "rain data from Chicago"\n# System automatically:\n1. Expands "Chicago" \u2192 [all Chicago node IDs]\n2. Maps "rain" \u2192 ["env.raingauge.rint", "env.raingauge.event_acc", ...]\n3. Adds sensor filters and proper time ranges\n4. Formats results with units and descriptions\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-adaptive-caching-strategy",children:"4. Adaptive Caching Strategy"}),"\n",(0,r.jsx)(n.p,{children:"Cache TTLs are tuned based on data volatility:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Static data"})," (node info, plugin metadata): 1 hour"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recent sensor data"}),": 5 minutes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Image search results"}),": 30 minutes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Errors"}),": 5 minutes (allow retry)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"There's exciting potential for expanding this platform:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom frontend integration"})," for web-based interfaces and dashboards"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IDE integration"})," VSCode and other IDE integrations beyond Cursor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Open source LLM support"})," with tool calling capabilities (Llama, GPT-oss, Qwen)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"End-to-end plugin workflow"})," from generation to testing to ECR publishing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-platform integration"})," (Slack, Discord, Jupyter notebooks, custom apps)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,r.jsx)(n.p,{children:"Scientific cyberinfrastructure is becoming increasingly complex. Sage operates 100+ nodes with thousands of sensors, tens of plugins, and terabytes of data. Traditional access methods require writing custom code, studying documentation, and managing credentials."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sage MCP eliminates these barriers"})," by providing a natural language interface that:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Understands intent"})," rather than requiring exact syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handles complexity"})," automatically (auth, filtering, formatting)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Provides context"})," through conversational interaction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enables exploration"})," without prior knowledge"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Accelerates research"})," by reducing time-to-insight"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For researchers, this means spending less time fighting with APIs and more time discovering insights. For developers, it means rapid prototyping and experimentation. For the Sage community, it means democratizing access to cutting-edge edge computing infrastructure."}),"\n",(0,r.jsx)(n.h2,{id:"open-source--community",children:"Open Source & Community"}),"\n",(0,r.jsx)(n.p,{children:"Sage MCP is built on open standards and open source:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MCP Protocol"}),": ",(0,r.jsx)(n.a,{href:"https://modelcontextprotocol.io",children:"modelcontextprotocol.io"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"FastMCP Framework"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/jlowin/fastmcp",children:"github.com/jlowin/fastmcp"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sage Ecosystem"}),": ",(0,r.jsx)(n.a,{href:"https://sagecontinuum.org",children:"sagecontinuum.org"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"We welcome contributions, feedback, and collaboration. Whether you're building similar infrastructure integration tools or exploring AI-powered interfaces for scientific computing, we'd love to hear from you."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/waggle-sensor/sage-mcp",children:"Browse the project code on GitHub"})})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}}}]);