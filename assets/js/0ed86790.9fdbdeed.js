"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4728],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var s=i(96540);const t={},o=s.createContext(t);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:n},e.children)}},84334:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"reference-guides/dev-quick-reference","title":"Developer quick reference","description":"Disclaimer","source":"@site/docs/reference-guides/dev-quick-reference.md","sourceDirName":"reference-guides","slug":"/reference-guides/dev-quick-reference","permalink":"/docs/reference-guides/dev-quick-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/waggle-sensor/sage-website/edit/main/docs/reference-guides/dev-quick-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Trigger examples","permalink":"/docs/reference-guides/triggers"},"next":{"title":"Installation manuals","permalink":"/docs/category/installation-manuals"}}');var t=i(74848),o=i(28453);const l={},r="Developer quick reference",a={},c=[{value:"Disclaimer",id:"disclaimer",level:2},{value:"Tips",id:"tips",level:2},{value:"Components of a plugin",id:"components-of-a-plugin",level:2},{value:"1. An application",id:"1-an-application",level:3},{value:"2. Dockerizing the app",id:"2-dockerizing-the-app",level:3},{value:"3. ECR configs and docs",id:"3-ecr-configs-and-docs",level:3},{value:"Getting access to the node",id:"getting-access-to-the-node",level:2},{value:"Testing plugins on the nodes",id:"testing-plugins-on-the-nodes",level:2},{value:"1. Download and run it",id:"1-download-and-run-it",level:3},{value:"Download",id:"download",level:4},{value:"Testing with Pluginctl",id:"testing-with-pluginctl",level:4},{value:"Testing USBSerial devices",id:"testing-usbserial-devices",level:3},{value:"2. Check if it worked?",id:"2-check-if-it-worked",level:3},{value:"3. Check why it failed?",id:"3-check-why-it-failed",level:3},{value:"4. Troubleshooting inside the container using pluginctl",id:"4-troubleshooting-inside-the-container-using-pluginctl",level:3},{value:"Edge Code Repository",id:"edge-code-repository",level:2},{value:"How to get your plugin on ECR",id:"how-to-get-your-plugin-on-ecr",level:3},{value:"Versioning your code",id:"versioning-your-code",level:4},{value:"After ECR registry test (generally not required)",id:"after-ecr-registry-test-generally-not-required",level:3},{value:"Scheduling the job",id:"scheduling-the-job",level:2},{value:"Scheduling scripts",id:"scheduling-scripts",level:3},{value:"<code>job.yaml</code> example for USB device",id:"jobyaml-example-for-usb-device",level:3},{value:"Multiple jobs example",id:"multiple-jobs-example",level:3},{value:"Debugging failed jobs",id:"debugging-failed-jobs",level:3},{value:"Downloading the data",id:"downloading-the-data",level:2},{value:"See Your Data on Sage Portal",id:"see-your-data-on-sage-portal",level:3},{value:"Download all images with wget",id:"download-all-images-with-wget",level:3},{value:"Sage data client for text data",id:"sage-data-client-for-text-data",level:3},{value:"Querying data example",id:"querying-data-example",level:3},{value:"Filter Criteria",id:"filter-criteria",level:3},{value:"Downloading Files",id:"downloading-files",level:3},{value:"More data analysis resources",id:"more-data-analysis-resources",level:3},{value:"Miscellaneous",id:"miscellaneous",level:2},{value:"Find PT Mobotix thermal camera ip on the node",id:"find-pt-mobotix-thermal-camera-ip-on-the-node",level:3},{value:"SSH &#39;Broken Pipe&#39; Issue and Solution",id:"ssh-broken-pipe-issue-and-solution",level:3},{value:"Solution",id:"solution",level:5}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"developer-quick-reference",children:"Developer quick reference"})}),"\n",(0,t.jsx)(n.h2,{id:"disclaimer",children:"Disclaimer"}),"\n",(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," This is a quick-reference guide, not a complete guide to making a plugin.\nUse this to copy-paste commands while working on plugins and to troubleshoot them in the testing and scheduling stages.\nPlease consult the official ","\ud83d\udcd7",(0,t.jsx)(n.a,{href:"/docs/tutorials/edge-apps/intro-to-edge-apps",children:"Plugin Tutorials"})," for detailed guidance."]}),"\n",(0,t.jsx)(n.h2,{id:"tips",children:"Tips"}),"\n",(0,t.jsxs)(n.p,{children:["\u2139\ufe0f","  Plugin=App"]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," = recommended code docs and tutorials from Sage."]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udc49"," First make ",(0,t.jsx)(n.strong,{children:"a minimalistic"})," app with a ",(0,t.jsx)(n.strong,{children:"core functionality"})," to test on the node. Later you may add all the options you want."]}),"\n",(0,t.jsxs)(n.p,{children:["\u261d"," Avoid making a plugin from scratch. Use another plugin or this ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/edge-app-template",children:"template"})," for your first plugin or use ","\ud83c\udd95"," ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/cookiecutter-sage-app",children:"Cookiecutter Template"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," Repository names should be all in small alphanumeric letters and ",(0,t.jsx)(n.code,{children:"-"})," (Do not use ",(0,t.jsx)(n.code,{children:"_"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"Requirements\n: Install Docker, git, and Python"}),"\n",(0,t.jsx)(n.h2,{id:"components-of-a-plugin",children:"Components of a plugin"}),"\n",(0,t.jsx)(n.p,{children:"Typical components of a Sage plugin are described below:"}),"\n",(0,t.jsx)(n.h3,{id:"1-an-application",children:"1. An application"}),"\n",(0,t.jsx)(n.p,{children:"This is just your usual Python program, either a single .py script or a set of directories with many components (e.g. ML models, unit tests, test data, etc)."}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udc49"," First do this step on your machine and perfect it until you are happy with the core functionality."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"app/app.py*"}),"\n: the main Python file (sometimes also named ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"main.py"})}),") contains the code that defines the functionality of the plugin or calls other scripts to do tasks. It usually has ",(0,t.jsx)(n.code,{children:"from waggle.plugin import Plugin"})," call to get the data from in-built sensors and publishes the output."]}),"\n",(0,t.jsxs)(n.p,{children:["Note: Variable names in ",(0,t.jsx)(n.code,{children:"plugin.publish"})," should be descriptive and specific."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Install ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/pywaggle",children:"pywaggle"})," ",(0,t.jsx)(n.code,{children:"pip3 install -U 'pywaggle[all]'"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"app/test.py"}),"\n: optional but recommended file, contains the unit tests for the plugin."]}),"\n",(0,t.jsx)(n.h3,{id:"2-dockerizing-the-app",children:"2. Dockerizing the app"}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udc49"," Put everything in a Docker container using a waggle base image and make it work. This may require some work if libraries are not compatible. Always use the latest base images from ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/waggle/plugin-base/tags",children:"Dockerhub"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Dockerfile*"}),"\n: contains instructions for building a Docker image for the plugin. It specifies the waggle base image from ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/waggle/plugin-base/tags",children:"dockerhub"}),", sets up the environment, installs dependencies, and sets the ",(0,t.jsx)(n.strong,{children:"entrypoint"})," for the container."]}),"\n",(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," Keep it simple ",(0,t.jsx)(n.code,{children:'ENTRYPOINT ["python3", "/app/app.py"]'})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"requirements.txt*"}),"\n: lists the Python dependencies for the plugin. It is used by the Dockerfile to install the required packages using ",(0,t.jsx)(n.code,{children:"pip"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"build.sh"}),"\n: is an optional shell script to automate building the complicated Docker image with tags etc."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Makefile"}),"\n: optional but the recommended file includes commands for building the Docker image, running tests, and deploying the plugin."]}),"\n",(0,t.jsx)(n.h3,{id:"3-ecr-configs-and-docs",children:"3. ECR configs and docs"}),"\n",(0,t.jsxs)(n.p,{children:["You can do this step (",(0,t.jsxs)(n.em,{children:["except ",(0,t.jsx)(n.strong,{children:"sage.yaml"})]}),") after testing on the node but before the ",(0,t.jsx)(n.a,{href:"#edge-code-repository",children:"ECR submission"}),". ","\ud83d\ude04"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sage.yaml*"}),"\n: is the configuration file useful for ECR and job submission? Most importantly it specifies the version and input arguments."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"README.md"})," and ",(0,t.jsx)(n.code,{children:"ecr-meta/ecr-science-description.md*"}),"\n: a Markdown file describing the scientific rationale of the plugin as an extended abstract. This includes a description of the plugin, installation instructions, usage examples, data downloading code snippets, and other relevant information."]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udca1"," Keep the same text in both files and follow the template of ",(0,t.jsx)(n.strong,{children:"ecr-science-description.md"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ecr-meta/ecr-icon.jpg"}),"\n: is an icon (512px x 512px or smaller) for the plugin in the Sage portal."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ecr-meta/ecr-science-image.jpg"}),"\n: is a key image or figure plot that best represents the scientific output of the plugin."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," Check Sage Tuorial ",(0,t.jsx)(n.a,{href:"/docs/tutorials/edge-apps/intro-to-edge-apps",children:"Part1"})," and ",(0,t.jsx)(n.a,{href:"/docs/tutorials/edge-apps/creating-an-edge-app",children:"Part2"})]})}),"\n",(0,t.jsx)(n.h2,{id:"getting-access-to-the-node",children:"Getting access to the node"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Follow this page: ",(0,t.jsx)(n.a,{href:"https://portal.sagecontinuum.org/account/access",children:"https://portal.sagecontinuum.org/account/access"})," to access the nodes."]}),"\n",(0,t.jsxs)(n.li,{children:["To test your connection the first time, execute ",(0,t.jsx)(n.code,{children:"ssh waggle-dev-sshd"})," and enter ",(0,t.jsx)(n.em,{children:"your ssh key passphrase"}),". You should get the following output,"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Enter passphrase for key ",(0,t.jsx)(n.strong,{children:"/Users/bhupendra/.ssh/id_rsa"}),":\nno command provided\nConnection to 192.5.86.5 closed."]}),"\n",(0,t.jsx)(n.p,{children:"Enter the passphrase to continue."}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["To connect to the node, execute ",(0,t.jsx)(n.code,{children:"ssh waggle-dev-node-V032"})," and enter your ",(0,t.jsx)(n.em,{children:"passphrase"})," (required twice)."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You should see the following message,"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"We are connecting you to node V032"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," See ",(0,t.jsx)(n.a,{href:"/docs/tutorials/edge-apps/testing-an-edge-app",children:"Sage Tuorial: Part 3"})," for details on this topic."]})}),"\n",(0,t.jsx)(n.h2,{id:"testing-plugins-on-the-nodes",children:"Testing plugins on the nodes"}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," Do not run any app or install packages directly on the node. Use Docker container or ",(0,t.jsx)(n.code,{children:"pluginctl"})," commands."]})}),"\n",(0,t.jsx)(n.h3,{id:"1-download-and-run-it",children:"1. Download and run it"}),"\n",(0,t.jsx)(n.h4,{id:"download",children:"Download"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If you have not already done it, you need your plugin in a public GitHub repository at this stage."}),"\n",(0,t.jsxs)(n.li,{children:["To test the app on a node, go to nodes W0xx (e.g. W023) and clone your repo there using the command ",(0,t.jsx)(n.code,{children:"git clone"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"At this stage, you can play with your plugin in the docker container until you are happy. Then if there are changes made to the plugin, I reccomend replicating the same in your local repository and pushing it to the github and node."}),"\n",(0,t.jsxs)(n.li,{children:["or do ",(0,t.jsx)(n.code,{children:"git commit -am 'changes from node'"})," and ",(0,t.jsx)(n.code,{children:"git push -u origin main"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["However, before commiting from node, you must run following commands at least once in your git repository on the node.\n",(0,t.jsx)(n.code,{children:'git config [--locale] user.name "Full Name"'}),"\n",(0,t.jsx)(n.code,{children:'git config [--locale] user.email "email@address.com"'})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," Make sure your ",(0,t.jsx)(n.strong,{children:"Dockerfile"})," has a proper ",(0,t.jsx)(n.strong,{children:"entrypoint"})," or the ",(0,t.jsx)(n.code,{children:"pluginctl"})," run will fail."]})}),"\n",(0,t.jsx)(n.h4,{id:"testing-with-pluginctl",children:"Testing with Pluginctl"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," For more details on this topic check ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/edge-scheduler/tree/main/docs/pluginctl",children:"pluginctl docs"}),"."]})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Then to test execute the command ",(0,t.jsx)(n.code,{children:"sudo pluginctl build ."}),". This will output the plugin-image registry address at the end of the build. Example: ",(0,t.jsx)(n.code,{children:"10.31.81.1:5000/local/my-plugin-name"})]}),"\n",(0,t.jsxs)(n.li,{children:["To run the plugin without input argument, use ",(0,t.jsx)(n.code,{children:"sudo pluginctl deploy -n <some-unique-name> <10.31.81.1:5000/local/my-plugin-name>"})]}),"\n",(0,t.jsxs)(n.li,{children:["Execute the command with input arguments. ",(0,t.jsx)(n.code,{children:"sudo pluginctl deploy -n <some-unique-name> <10.31.81.1:5000/local/my-plugin-name> -- -i top_camera"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["If you need GPU, use the selector ",(0,t.jsx)(n.code,{children:"sudo pluginctl deploy -n <some-unique-name> <10.31.81.1:5000/local/my-plugin-name> -- -i top_camera"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["\u2757"," ",(0,t.jsx)(n.code,{children:"--"})," is a separator. After the ",(0,t.jsx)(n.code,{children:"--"})," all arguments are for your entrypoint i.e. app.py."]}),"\n",(0,t.jsxs)(n.li,{children:["To check running plugins, execute ",(0,t.jsx)(n.code,{children:"sudo pluginctl ps"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["To stop the plugin, execute ",(0,t.jsx)(n.code,{children:"sudo pluginctl rm cloud-motion"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["To check the log ",(0,t.jsx)(n.code,{children:"pluginctl logs cloud-motion"}),"\n:warning",":Do"," not forget to stop the plugins after testing or it will run forever."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-usbserial-devices",children:"Testing USBSerial devices"}),"\n",(0,t.jsxs)(n.p,{children:[":point_right",":The"," USBserial device template is in ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/cookiecutter-sage-app",children:"Cookiecutter Template"}),". Also check ",(0,t.jsx)(n.a,{href:"https://github.com/jrobrien91/waggle-wxt536",children:"wxt536"})," plugin."]}),"\n",(0,t.jsx)(n.p,{children:"Steps for working with a USB serial device"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"First, you need to confirm which computing unit the USB device is connected to, RPi or nxcore."}),"\n",(0,t.jsxs)(n.li,{children:["Then, you add the ",(0,t.jsx)(n.code,{children:"--selector"})," and ",(0,t.jsx)(n.code,{children:"--privileged"})," options to the ",(0,t.jsx)(n.code,{children:"pluginctl"}),"  command during testing and specifying the same in the ",(0,t.jsx)(n.strong,{children:"job.yaml"})," for scheduling."]}),"\n",(0,t.jsxs)(n.li,{children:["To test the plugin on ",(0,t.jsx)(n.em,{children:"nxcore"}),", which has the USB device, use the command ",(0,t.jsx)(n.code,{children:"sudo pluginctl run -n testname --selector zone=core --privileged 10.31.81.1:5000/local/plugin-name"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"--selector"})," and ",(0,t.jsx)(n.code,{children:"--privileged"})," attributes should be added to the ",(0,t.jsx)(n.em,{children:"pluginSpec"})," in the job submission script as shown in the example YAML code."]}),"\n",(0,t.jsxs)(n.li,{children:["You can check which computing unit is being used by the edge scheduler by running the ",(0,t.jsx)(n.code,{children:"kubectl describe pod"})," command and checking the output."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," Re/Check that you are using the correct USB port for the device if getting empty output or ",(0,t.jsx)(n.em,{children:"folder not found"})," error."]}),"\n",(0,t.jsx)(n.h3,{id:"2-check-if-it-worked",children:"2. Check if it worked?"}),"\n",(0,t.jsxs)(n.p,{children:["Login to the Sage portal and follow the instructions from the section ",(0,t.jsx)(n.a,{href:"https://hackmd.io/iKUbbfZ7RYGbXT_tnBd1vg?both#See-Your-Data-on-Sage-Portal",children:"See Your Data on Sage Portal"})]}),"\n",(0,t.jsx)(n.h3,{id:"3-check-why-it-failed",children:"3. Check why it failed?"}),"\n",(0,t.jsx)(n.p,{children:"When you encounter a failing/long pending job with an error, you can use the following steps to help you diagnose the issue:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["First check the Dockerfile ",(0,t.jsx)(n.strong,{children:"entrypoint"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use the command ",(0,t.jsx)(n.code,{children:"sudo kubectl get pod"})," to get the name of the pod associated with the failing job."]}),"\n",(0,t.jsxs)(n.li,{children:["Use the command ",(0,t.jsx)(n.code,{children:"sudo kubectl logs <<POD_NAME>>"})," to display the logs for the pod associated with the failing job. These logs will provide you with information on why the job failed."]}),"\n",(0,t.jsxs)(n.li,{children:["Use the command ",(0,t.jsx)(n.code,{children:"sudo kubectl describe pod POD_NAME"})," to display detailed information about the pod associated with the failing job."]}),"\n",(0,t.jsx)(n.li,{children:"This information can help you identify any issues with the pod itself, such as issues with its configuration or resources."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By following these steps, you can better understand why the job is failing and take steps to resolve the issue."}),"\n",(0,t.jsx)(n.h3,{id:"4-troubleshooting-inside-the-container-using-pluginctl",children:"4. Troubleshooting inside the container using pluginctl"}),"\n",(0,t.jsxs)(n.p,{children:["Follow this ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/edge-scheduler/blob/main/docs/pluginctl/tutorial_getintoplugin.md",children:"tutorial"})," to get in an already running container to troubleshoot the issue.\nIf the plugin fails instantly and your are not able to get inside the container use following commands to override the entrypoint"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["First Deploy with Custom Entrypoint ",(0,t.jsx)(n.code,{children:"--entrypoint /bin/bash "}),":"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo pluginctl deploy -n testnc --entrypoint /bin/bash 10.31.81.1:5000/local/plugin-mobotix-scan -- -c 'while true; do date; sleep 1; done'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note the ",(0,t.jsx)(n.code,{children:"-c 'while true; do date; sleep 1; done'"})," instead of your usual plugin arguments.\nNow if you do ",(0,t.jsx)(n.code,{children:"sudo pluginctl logs testnc"})," you will see the logs i.e. date."]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Access the Plugin Container:\n",(0,t.jsx)(n.code,{children:"sudo pluginctl exec -ti testnc -- /bin/bash"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"edge-code-repository",children:"Edge Code Repository"}),"\n",(0,t.jsx)(n.h3,{id:"how-to-get-your-plugin-on-ecr",children:"How to get your plugin on ECR"}),"\n",(0,t.jsx)(n.p,{children:"To publish your Plugin on ECR, follow these steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.a,{href:"https://portal.sagecontinuum.org/apps/",children:"https://portal.sagecontinuum.org/apps/"}),"."]}),"\n",(0,t.jsx)(n.li,{children:'Click on "Explore the Apps Portal".'}),"\n",(0,t.jsx)(n.li,{children:'Click on "My Apps". You must be logged in to continue.'}),"\n",(0,t.jsx)(n.li,{children:'Click "Create App" and enter your Github Repo URL.'}),"\n",(0,t.jsx)(n.li,{children:'\'Click "Register and Build App".'}),"\n",(0,t.jsxs)(n.li,{children:['On Your app page click on the "Tags" tab to get the registry link when you need to run the job on the node either using ',(0,t.jsx)(n.code,{children:"pluginctl"})," or job script. This will look like:",(0,t.jsx)(n.code,{children:"docker pull registry.sagecontinuum.org/bhupendraraut/mobotix-move:1.23.3.2"})]}),"\n",(0,t.jsx)(n.li,{children:"Repeat the above process for updating the plugin."}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["After the build process is complete, you need to ",(0,t.jsx)(n.strong,{children:"make the plugin public"})," to schedule it."]})}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udc49"," If you have skipped step ",(0,t.jsx)("a",{href:"#3-ecr-configs-and-docs",children:"3. ECR Configs and Docs"}),", do it before submitting it to the ECR. Ensure that your ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ecr-meta/ecr-science-description.md"})})," and ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"sage.yaml"})})," files are properly configured for this process."]}),"\n",(0,t.jsx)(n.h4,{id:"versioning-your-code",children:"Versioning your code"}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"You can not resubmit the plugin to ECR with the same version number again."})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"So think about how you change it every time you resubmit to ECR and make your style of versioning. :thinking_face:"}),"\n",(0,t.jsxs)(n.li,{children:["I use ",(0,t.jsx)(n.em,{children:"'vx.y.m.d'"})," e.g. ",(0,t.jsx)(n.em,{children:"'v0.23.3.4'"})," but then I can only have 1 version a day, so now I am thinking of adding an incremental integer to it."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"after-ecr-registry-test-generally-not-required",children:"After ECR registry test (generally not required)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Generally successfully tested plugins just work. However, in case they are failing in the scheduled jobs after running for a while or after successfully running in the above tests, do the following."}),"\n",(0,t.jsxs)(n.li,{children:["To test a plugin on a node after it has been built on the ECR, follow these steps:\n",(0,t.jsx)(n.code,{children:"sudo pluginctl run --name test-run registry.sagecontinuum.org/bhupendraraut/cloud-motion:1.23.01.24 -- -input top"})]}),"\n",(0,t.jsxs)(n.li,{children:['This command will execute the plugin with the specified ECR image (version 1.23.01.24), passing the "-input top" argument to the plugin (Note ',(0,t.jsx)(n.code,{children:"--"})," after the image telling ",(0,t.jsx)(n.code,{children:"pluginctl"})," that these arguments are for the plugin)."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udc49"," Note the use of ",(0,t.jsx)(n.code,{children:"sudo"})," in all ",(0,t.jsx)(n.code,{children:"pluginctl"})," and  ",(0,t.jsx)(n.code,{children:"docker"})," commands on the node."]}),"\n",(0,t.jsx)(n.p,{children:'Assuming that the plugin has been installed correctly and the ECR image is available, running this command should test the "test-motion" plugin on the node.'}),"\n",(0,t.jsxs)(n.p,{children:["You may also have to call the ",(0,t.jsx)(n.code,{children:"kubectl <POD>"})," commands as in the testing section if this fails."]}),"\n",(0,t.jsx)(n.h2,{id:"scheduling-the-job",children:"Scheduling the job"}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["\u2757"," If you get an error like ",(0,t.jsx)(n.code,{children:"registry does not exist in ECR"}),", then check that your plugin is made public."]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Follow this ",(0,t.jsx)(n.a,{href:"/docs/tutorials/schedule-jobs",children:"link"})," to get an understanding of how to submit a job"]}),"\n",(0,t.jsx)(n.li,{children:"Here are the parameters we set for the Mobotix sampler plugin,"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-less=",children:"-name thermalimaging registry.sagecontinuum.org/bhupendraraut/mobotix-sampler:1.22.4.13 \\\n   --ip 10.31.81.14 \\\n   -u userid \\\n   -p password \\\n   --frames 1 \\\n   --timeout 5 \\\n   --loopsleep 60\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Your science rule can be a cronjob (More information can be found ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/sciencerule-checker/blob/master/docs/supported_functions.md#cronjobprogram_name-cronjob_time",children:"here"})]}),"\n",(0,t.jsxs)(n.li,{children:["This runs every 15 minutes\n",(0,t.jsx)(n.code,{children:'"thermalimaging": cronjob("thermalimaging", "*/15 * * * *")'}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.a,{href:"https://crontab.guru/",children:"Crontab Guru"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["You can also make it triggered by a value. Please ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/sciencerule-checker/blob/master/docs/supported_functions.md",children:"read this"})," for supported functions."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"scheduling-scripts",children:"Scheduling scripts"}),"\n",(0,t.jsxs)(n.p,{children:["\u2728"," Check user friendly ",(0,t.jsx)(n.a,{href:"https://portal.sagecontinuum.org/jobs/all-jobs",children:"job submission UI"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," Check ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/edge-scheduler/tree/main/docs/sesctl",children:"sesctl docs"})," for command line tool."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u261d"," Do not use ",(0,t.jsx)(n.code,{children:"_"}),", upper case letters or ",(0,t.jsx)(n.code,{children:"."})," in the job name. Use only lowercase letters, numbers and ",(0,t.jsx)(n.code,{children:"-"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["\u261d"," Ensure that the plugin is set to 'public' in the Sage app portal."]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"jobyaml-example-for-usb-device",children:[(0,t.jsx)(n.code,{children:"job.yaml"})," example for USB device"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml=",children:'name: atmoswxt\nplugins:\n- name: waggle-wxt536\n  pluginSpec:\n    image: registry.sagecontinuum.org/jrobrien/waggle-wxt536:0.23.4.13\n    privileged: true\n    selector:\n      zone: core\nnodeTags: []\nnodes:\n  W057: true\n  W039: true\nscienceRules:\n- \'schedule("waggle-wxt536"): cronjob("waggle-wxt536", "1/10 * * * *")\'\nsuccessCriteria:\n- WallClock(\'1day\')\n'})}),"\n",(0,t.jsx)(n.h3,{id:"multiple-jobs-example",children:"Multiple jobs example"}),"\n",(0,t.jsx)(n.p,{children:"If you want to run your plugins not all at the same time. Use this example."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml=",children:'name: w030-k3s-upgrade-test\nplugins:\n- name: object-counter-bottom\n  pluginSpec:\n    image: registry.sagecontinuum.org/yonghokim/object-counter:0.5.1\n    args:\n    - -stream\n    - bottom_camera\n    - -all-objects\n    selector:\n      resource.gpu: "true"\n- name: cloud-cover-bottom\n  pluginSpec:\n    image: registry.sagecontinuum.org/seonghapark/cloud-cover:0.1.3\n    args:\n    - -stream\n    - bottom_camera\n    selector:\n      resource.gpu: "true"\n- name: surfacewater-classifier\n  pluginSpec:\n    image: registry.sagecontinuum.org/seonghapark/surface_water_classifier:0.0.1\n    args:\n    - -stream\n    - bottom_camera\n    - -model\n    - /app/model.pth\n- name: avian-diversity-monitoring\n  pluginSpec:\n    image: registry.sagecontinuum.org/dariodematties/avian-diversity-monitoring:0.2.5\n    args:\n    - --num_rec\n    - "1"\n    - --silence_int\n    - "1"\n    - --sound_int\n    - "20"\n- name: cloud-motion-v1\n  pluginSpec:\n    image: registry.sagecontinuum.org/bhupendraraut/cloud-motion:1.23.02.20\n    args:\n    - --input\n    - bottom_camera\n- name: imagesampler-bottom\n  pluginSpec:\n    image: registry.sagecontinuum.org/theone/imagesampler:0.3.1\n    args:\n    - -stream\n    - bottom_camera\n- name: audio-sampler\n  pluginSpec:\n    image: registry.sagecontinuum.org/seanshahkarami/audio-sampler:0.4.1\nnodeTags: []\nnodes:\n  W030: true\nscienceRules:\n- \'schedule(object-counter-bottom): cronjob("object-counter-bottom", "*/5 * * * *")\'\n- \'schedule(cloud-cover-bottom): cronjob("cloud-cover-bottom", "01-59/5 * * * *")\'\n- \'schedule(surfacewater-classifier): cronjob("surfacewater-classifier", "02-59/5\n  * * * *")\'\n- \'schedule("avian-diversity-monitoring"): cronjob("avian-diversity-monitoring", "*\n  * * * *")\'\n- \'schedule("cloud-motion-v1"): cronjob("cloud-motion-v1", "03-59/5 * * * *")\'\n- \'schedule(imagesampler-bottom): cronjob("imagesampler-bottom", "04-59/5 * * * *")\'\n- \'schedule(audio-sampler): cronjob("audio-sampler", "*/5 * * * *")\'\nsuccessCriteria:\n- Walltime(1day)\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"here\nobjecct-counter runs at 0, 5, 10, etc\ncloud-cover: 1, 6, 11, etc.\nsurface water: 2, 7, 12, etc.\ncloud-motion: 3, 8, 13, etc.\nimage-sampl: 4, 9, 14, etc."}),"\n",(0,t.jsx)(n.h3,{id:"debugging-failed-jobs",children:"Debugging failed jobs"}),"\n",(0,t.jsx)(n.p,{children:"Do you know how to identify why a job is failing"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2728"," When the job failures are seen as ",(0,t.jsx)(n.code,{children:"red"})," markers on your ",(0,t.jsx)(n.a,{href:"https://portal.sagecontinuum.org/jobs/my-jobs",children:"job page"}),", you can click them to see the error.\n",(0,t.jsx)(n.img,{src:"https://i.imgur.com/xPXERPX.png",alt:"click on red markers"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://i.imgur.com/GmStINF.png",alt:""})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Or detail errors can be found using using ",(0,t.jsx)(n.code,{children:"sage_data_client"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Requirements: ",(0,t.jsx)(n.code,{children:"sage_data_client"})," and ",(0,t.jsx)(n.a,{href:"https://github.com/waggle-sensor/edge-scheduler/blob/main/scripts/analysis/utils.py",children:"utils.py"})]}),"\n",(0,t.jsx)(n.li,{children:"By specifying the plugin name and node, the following code will print out the reasons for job failure within the last 60 minutes."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python=",children:'from utils import *\n\nmynode = "w030"\n\nmyplugin = "water"\ndf = fill_completion_failure(parse_events(get_data(mynode, start="-60m")))\nfor _, p in df[df["plugin_name"].str.contains(myplugin)].iterrows():\n    print(p["error_log"])\n'})}),"\n",(0,t.jsx)(n.h2,{id:"downloading-the-data",children:"Downloading the data"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/docs/tutorials/accessing-data",children:"Sage docs for accessing-data"})}),"\n",(0,t.jsx)(n.h3,{id:"see-your-data-on-sage-portal",children:"See Your Data on Sage Portal"}),"\n",(0,t.jsx)(n.p,{children:"To check your data on Sage Portal, follow these steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Click on the Data tab at the top of the portal page."}),"\n",(0,t.jsx)(n.li,{children:"Select Data Query Browser from the dropdown menu."}),"\n",(0,t.jsxs)(n.li,{children:["Then, select your app in the filter.\nThis will show all the data that is uploaded by your app using the ",(0,t.jsx)(n.code,{children:"plugin.publish()"})," and ",(0,t.jsx)(n.code,{children:"plugin.upload()"})," methods."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In addition, you can data visualize as a time series and select multiple variables to visualize together in a chart, which can be useful for identifying trends or patterns."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://i.imgur.com/5W9jAfw.png",alt:""})}),"\n",(0,t.jsx)(n.h3,{id:"download-all-images-with-wget",children:"Download all images with wget"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Visit ",(0,t.jsx)(n.a,{href:"https://training-data.sagecontinuum.org/",children:"https://training-data.sagecontinuum.org/"})]}),"\n",(0,t.jsx)(n.li,{children:"select the node and period for data."}),"\n",(0,t.jsxs)(n.li,{children:["Select the required data and download the text file ",(0,t.jsx)(n.em,{children:"urls-xxxxxxx.txt"})," with urls"]}),"\n",(0,t.jsxs)(n.li,{children:["To select only the top camera images, use the ",(0,t.jsx)(n.code,{children:"vim"})," command: ",(0,t.jsx)(n.code,{children:"g/^\\(.*top\\)\\@!.*$/d"}),". This will delete URLs that do not contain the word 'top'"]}),"\n",(0,t.jsxs)(n.li,{children:["Copy the following command from the website and run it in your terminal. ",(0,t.jsx)(n.code,{children:"wget -r -N -i urls-xxxxxxx.txt"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sage-data-client-for-text-data",children:"Sage data client for text data"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Sage data client ",(0,t.jsx)(n.a,{href:"https://github.com/sagecontinuum/sage-data-client/blob/main/examples/plotting_example.ipynb",children:"python Notebook Example"})]}),"\n",(0,t.jsxs)(n.li,{children:["pypi ",(0,t.jsx)(n.a,{href:"https://pypi.org/project/sage-data-client/",children:"link"}),"\n",(0,t.jsx)(n.code,{children:"pip install sage-data-client"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\ud83d\udcd7"," Documentation for ",(0,t.jsx)(n.a,{href:"https://docs.sagecontinuum.org/docs/tutorials/accessing-data",children:"accessing the data."})]})}),"\n",(0,t.jsx)(n.h3,{id:"querying-data-example",children:"Querying data example"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"sage_data_client"})," provides ",(0,t.jsx)(n.code,{children:"query()"})," function which takes the parameters:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import sage_data_client\nimport pandas as pd\n\ndf = sage_data_client.query(\n    start="2023-01-08T00:00:09Z",  # Start time in "YYYY-MM-DDTHH:MM:SSZ" or "YYYYMMDD-HH:MM:SS" format\n    end="2024-01-08T23:23:24Z",    # End time in the same format as start time\n    filter={\n        "plugin": ".*mobotix-scan.*",  # Regex for filtering by plugin name\n        "vsn": "W056",                # Specific node identifier\n        "name": "upload",             # Specific data field\n        "filename": ".*_position1.nc" # Regex for filtering filenames\n    }\n)\n\ndf.sort_values(\'timestamp\')\ndf\n'})}),"\n",(0,t.jsx)(n.h3,{id:"filter-criteria",children:"Filter Criteria"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"start"})," and ",(0,t.jsx)(n.code,{children:"end"}),": Time should be specified in UTC, using the format ",(0,t.jsx)(n.code,{children:"YYYY-MM-DDTHH:MM:SSZ"})," or ",(0,t.jsx)(n.code,{children:"YYYYMMDD-HH:MM:SS"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"filter"}),": A dictionary for additional filtering criteria. Each key is a column name in the ",(0,t.jsx)(n.code,{children:"df"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use regular expressions (denoted as ",(0,t.jsx)(n.code,{children:".*pattern.*"}),") for flexible matching within text fields like ",(0,t.jsx)(n.code,{children:"plugin"})," or ",(0,t.jsx)(n.code,{children:"filename"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"downloading-files",children:"Downloading Files"}),"\n",(0,t.jsxs)(n.p,{children:["Use additional pandas operations on ",(0,t.jsx)(n.code,{children:"df"})," to to include only the records of interest and download the files using a function like the one provided below, which gets the URLs in the ",(0,t.jsx)(n.code,{children:"value"})," column, using authentication."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import requests\nimport os\nfrom requests.auth import HTTPBasicAuth\n\nuname = 'username'\nupass = 'token_as_password'\n\ndef download_files(df, download_path, uname, upass):\n   # check download directory\n   if not os.path.exists(download_path):\n      os.makedirs(download_path)\n\n   for index, row in df.iterrows():\n      # 'value' column has url\n      url = row['value']\n\n      filename = url.split('/')[-1]\n\n      # Download using credentials\n      response = requests.get(url, auth=HTTPBasicAuth(uname, upass))\n      if response.status_code == 200:\n         # make the downloads path\n         file_path = os.path.join(download_path, filename)\n         # Write a new file\n         with open(file_path, 'wb') as file:\n         file.write(response.content)\n         print(f\"Downloaded {filename} to {file_path}\")\n      else:\n         print(f\"Failed to download {url}, status code: {response.status_code}\")\n\n# usage\ndownload_files(df, '/Users/bhupendra/projects/epcape_pier/data/downloaded/nc_pos1', uname, upass)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"more-data-analysis-resources",children:"More data analysis resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/sagecontinuum/sage-data-client/tree/main/examples",children:"SAGE Examples"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://crocus-urban.github.io/instrument-cookbooks/README.html",children:"CROCUS Cookbooks"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"miscellaneous",children:"Miscellaneous"}),"\n",(0,t.jsx)(n.h3,{id:"find-pt-mobotix-thermal-camera-ip-on-the-node",children:"Find PT Mobotix thermal camera ip on the node"}),"\n",(0,t.jsx)(n.p,{children:"Login to the node where the PTmobotix camera is connected."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["run ",(0,t.jsx)(n.code,{children:"nmap -sP 10.31.81.1/24"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Nmap scan report for ws-nxcore-000048B02D3AF49F (10.31.81.1)\nHost is up (0.0012s latency).\nNmap scan report for switch (10.31.81.2)\nHost is up (0.0058s latency).\nNmap scan report for ws-rpi (10.31.81.4)\nHost is up (0.00081s latency).\nNmap scan report for 10.31.81.10\nHost is up (0.0010s latency).\nNmap scan report for 10.31.81.15\nHost is up (0.00092s latency).\nNmap scan report for 10.31.81.17\nHost is up (0.0014s latency).\nNmap done: 256 IP addresses (6 hosts up) scanned in 2.42 seconds\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["From the output run any command for each ip\ne.g.\n",(0,t.jsx)(n.code,{children:"curl -u admin:meinsm  -X POST  http://10.31.81.15/control/rcontrol?action=putrs232&rs232outtext=%FF%01%00%0F%00%00%10"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ip for which output is ",(0,t.jsx)(n.code,{children:"OK"})," is the Mobotix."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ssh-broken-pipe-issue-and-solution",children:"SSH 'Broken Pipe' Issue and Solution"}),"\n",(0,t.jsx)(n.p,{children:"A 'Broken pipe' occurs when the SSH session to waggle-dev-node is inactive for longer than 10/15 minutes, resulting in a closed connection."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"client_loop: send disconnect: Broken pipe\nConnection to waggle-dev-node-w021 closed by remote host.\nConnection to waggle-dev-node-w021 closed.\n"})}),"\n",(0,t.jsx)(n.h5,{id:"solution",children:"Solution"}),"\n",(0,t.jsx)(n.p,{children:"To prevent the SSH session from timing out and to maintain the connection, the following configuration options can be added to the SSH config file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ssh",children:"# Keep the SSH connection alive by sending a message to the server every 60 seconds\nHost *\n  TCPKeepAlive yes\n  ServerAliveInterval 60\n  ServerAliveCountMax 999\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);